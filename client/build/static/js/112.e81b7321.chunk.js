"use strict";(self.webpackChunkbp_frontend_typescript=self.webpackChunkbp_frontend_typescript||[]).push([[112],{112:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var i,s=t(885),o=t(2791),r=t(3360),c=t(9743),a=t(2677),l=t(5759),d=t(4942),u=t(1413),m=t(6006),h=t(6864),p=t(2451),x=t(2784),T=t(9186),v=t(473),f=t(184),j=function(e){return(0,f.jsxs)("div",{children:[(0,f.jsxs)("h5",{className:"card-title",children:[e.label,e.withCloseButton&&(0,f.jsx)(v.Z,{className:"float-end",onClick:e.withCloseButton.onDelete})]}),(0,f.jsx)(h.gN,{name:e.name,as:e.as?e.as:"",type:"".concat(e.type?e.type:"text"),step:"number"===e.type?.5:"",placeholder:e.placeholder,className:"form-control ".concat(e.error?"is-invalid":""," ").concat(e.className),onChange:function(n){e.onChange(n)},children:e.children}),(0,f.jsx)(h.Bc,{name:e.name,children:function(e){return(0,f.jsx)("div",{className:"error-msg mt-2",children:e})}})]})};!function(e){e[e.QUESTION_TITLE=0]="QUESTION_TITLE",e[e.QUESTION_POINTS=1]="QUESTION_POINTS",e[e.QUESTION_TYPE=2]="QUESTION_TYPE",e[e.OPTION_TITLE=3]="OPTION_TITLE",e[e.OPTION_CORRECT=4]="OPTION_CORRECT",e[e.TEST_TITLE=5]="TEST_TITLE"}(i||(i={}));var N=function(e){var n=(0,o.useState)(e.formField?e.formField:new T.Z(1,"",-1,[new p.ZP(Math.random(),1,1,"",p.TC.INPUT,[new x.Z(Math.random(),"",!0),new x.Z(Math.random(),"",!0)])])),t=(0,s.Z)(n,2),c=t[0],a=t[1],l=function(e,n){a((function(n){var t=n;return t.questions=t.questions.filter((function(n){return n.id!==e})),t})),n(c)},v=function(e,n,t){a((function(t){var i=t,s=i.questions.findIndex((function(n){return n.id===e}));return i.questions[s].options=i.questions[s].options.filter((function(e){return e.id!==n})),i})),t(c)},N=function(e,n,t,s,o,r,l){a((function(t){var s=e.currentTarget.value,o=t;if(n===i.TEST_TITLE&&(o.title=s),r){var c=o.questions.at(o.questions.findIndex((function(e){return e.id===r})));if(!c)return t;if(l){var a=c.options.at(c.options.findIndex((function(e){return e.id===l})));if(!a)return t;n===i.OPTION_TITLE&&(a.title=s),n===i.OPTION_CORRECT&&(c.type===p.TC.SINGLE_CHOICE&&c.options.forEach((function(e){return e.isCorrect=e.id===a.id})),a.isCorrect=e.currentTarget.checked)}n===i.QUESTION_TITLE&&(c.title=s),n===i.QUESTION_POINTS&&(c.points=s),n===i.QUESTION_TYPE&&(c.type=s,c.options.forEach((function(e){return e.isCorrect=c.type===p.TC.INPUT})))}return o})),s(c),o(t)},C=m.Ry().shape({title:m.Z_().required("*Povinn\xe9"),questions:m.IX().of(m.Ry().shape({points:m.Rx().min(1,"Minim\xe1lny po\u010det bodov je 1"),title:m.Z_().required("*Povinn\xe9"),type:m.Z_().required("*Povinn\xe9"),options:m.IX().of(m.Ry().shape({title:m.Z_().required("*Povinn\xe9"),correct:m.O7()})).min(1,"Ot\xe1zka mus\xed obsahova\u0165 aspo\u0148 jednu odpove\u010f").required("*Povinn\xe9").max(6,"Maxim\xe1lny po\u010det odpoved\xed je 6")})).min(1,"Test mus\xed obsahova\u0165 aspo\u0148 jednu ot\xe1zku").required("*Povinn\xe9")});return(0,f.jsx)(h.J9,{initialValues:c,enableReinitialize:!0,validateOnBlur:!0,validate:function(e){var n={};try{C.validateSync(e,{abortEarly:!1})}catch(t){n=t.inner.reduce((function(e,n){return(0,u.Z)((0,u.Z)({},e),{},(0,d.Z)({},n.path,n.message))}))}finally{return e.questions.some((function(e){return e.options.every((function(e){return!1===e.isCorrect}))}))?(0,u.Z)((0,u.Z)({},n),{},{optNotSelected:"Aspo\u0148 jedna odpove\u010f mus\xed by\u0165 ozna\u010den\xe1 ako spr\xe1vna"}):n}},validationSchema:C,onSubmit:function(n){e.onSubmit(c)},children:function(n){var t=n.errors,s=n.values,o=n.touched,d=n.setValues,u=n.handleChange;n.setErrors;return(0,f.jsxs)(h.l0,{className:"form",children:[(0,f.jsxs)("div",{className:"list-group-item mt-3 ",children:[(0,f.jsx)(j,{label:"N\xe1zov testu",name:"title",error:!(!t.title||!o.title),placeholder:"Ve\u013ek\xfd test...",onChange:function(e){N(e,i.TEST_TITLE,"title",d,u)}}),"string"===typeof t.questions?(0,f.jsx)("div",{className:"centered error-msg",children:(0,f.jsx)("h4",{children:t.questions})}):null,(0,f.jsx)(h.F2,{name:"questions",children:function(e){return s.questions.map((function(e,n){var s=function(e){return(0,h.u9)(t,e)&&(0,h.u9)(o,e)};return(0,f.jsxs)("div",{children:[(0,f.jsx)("hr",{}),(0,f.jsxs)("div",{className:"list-group-item mt-3 ",children:[(0,f.jsx)(j,{label:"Ot\xe1zka ".concat(n+1),name:"questions.".concat(n,".title"),withCloseButton:{onDelete:l.bind(null,e.id,d)},as:"textarea",error:s("questions.".concat(n,".title")),placeholder:"Ak\xfd je n\xe1zov...",onChange:function(t){return N(t,i.QUESTION_TITLE,"questions.".concat(n,".title"),d,u,e.id)}},"Ot\xe1zka ".concat(n+1)),(0,f.jsxs)("div",{className:"row mt-3",children:[(0,f.jsx)("div",{className:"col-12 col-md-6",children:(0,f.jsx)("div",{className:"form-control",children:(0,f.jsx)(j,{label:"Po\u010det bodov",name:"questions.".concat(n,".points"),error:s("questions.".concat(n,".points")),className:"mb-2",type:"number",placeholder:"1",onChange:function(t){return N(t,i.QUESTION_POINTS,"questions.".concat(n,".points"),d,u,e.id)}})})}),(0,f.jsx)("div",{className:"col mt-sm-3 mt-md-0",children:(0,f.jsx)("div",{className:"form-control",children:(0,f.jsxs)(j,{name:"questions.".concat(n,".type"),label:"Typ ot\xe1zky",as:"select",className:"mb-2",error:s("questions.".concat(n,".type")),onChange:function(t){return N(t,i.QUESTION_TYPE,"questions.".concat(n,".type"),d,u,e.id)},children:[(0,f.jsx)("option",{value:p.TC.INPUT,children:"Textov\xfd vstup"}),(0,f.jsx)("option",{value:p.TC.SINGLE_CHOICE,children:"Jedna mo\u017enos\u0165"}),(0,f.jsx)("option",{value:p.TC.MULTIPLE_CHOICES,children:"Viacero mo\u017enost\xed"})]})})})]}),"string"===typeof(0,h.u9)(t,"questions.".concat(n,".options"))?(0,f.jsx)("div",{className:"centered error-msg",children:(0,f.jsx)("h4",{children:(0,h.u9)(t,"questions.".concat(n,".options"))})}):null,(0,f.jsx)(h.F2,{name:"questions.".concat(n,".options"),children:function(t){return e.options.map((function(t,o){return(0,f.jsx)("div",{className:"mt-3 mb-4",children:(0,f.jsx)("div",{className:"list-group-item",children:(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)(j,{name:"questions.".concat(n,".options.").concat(o,".title"),withCloseButton:{onDelete:v.bind(null,e.id,t.id,d)},label:"Odpove\u010f ".concat(o+1),onChange:function(s){N(s,i.OPTION_TITLE,"questions.".concat(n,".options.").concat(o,".title"),d,u,e.id,t.id)},error:s("questions.".concat(n,".options.").concat(o,".title"))}),(0,f.jsxs)("div",{className:"mt-2",children:[(0,f.jsx)("label",{htmlFor:"questions.".concat(n,".options.").concat(o),className:"me-3 form-label",children:"Spr\xe1vna odpove\u010f"}),(0,f.jsx)("input",{name:"option".concat(n),id:"questions.".concat(n,".options.").concat(o),type:"".concat(e.type===p.TC.MULTIPLE_CHOICES||e.type===p.TC.INPUT?"checkbox":"radio"),checked:t.isCorrect,disabled:e.type===p.TC.INPUT,onClick:function(s){e.type===p.TC.SINGLE_CHOICE&&e.options.length>1&&e.options.every((function(e){return e.isCorrect}))&&N(s,i.OPTION_CORRECT,"questions.".concat(n,".options.").concat(o,".correct"),d,u,e.id,t.id)},onChange:function(s){N(s,i.OPTION_CORRECT,"questions.".concat(n,".options.").concat(o,".correct"),d,u,e.id,t.id)}})]})]})})},t.id)}))}}),e.options.length>0&&e.options.every((function(e){return!1===e.isCorrect}))&&(0,h.u9)(t,"optNotSelected")&&(0,f.jsx)("div",{className:"centered error-msg",children:(0,f.jsx)("h5",{children:(0,h.u9)(t,"optNotSelected")})}),(0,f.jsx)("div",{className:"centered my-1 mb-3",children:(0,f.jsx)(r.Z,{className:"width-25-991-60",variant:"secondary",onClick:function(){var n;n=e.id,a((function(e){var t=e,i=t.questions.findIndex((function(e){return e.id===n}));return t.questions[i].options.push(new x.Z(Math.random(),"",t.questions[i].type===p.TC.INPUT)),t})),d(c)},children:"Prida\u0165 odpove\u010f"})})]})]},n)}))}}),(0,f.jsx)("div",{className:"centered mt-4 mb-3",children:(0,f.jsx)(r.Z,{className:"width-35-991-80",onClick:function(){a((function(e){var n=e;return n.questions.push(new p.ZP(Math.random(),n.questions.length+1,1,"",p.TC.INPUT,[new x.Z(Math.random(),"",!0)])),n})),d(c)},children:"Prida\u0165 Ot\xe1zku"})})]}),(0,f.jsx)("div",{className:"text-center mt-4 mb-2",children:(0,f.jsx)(r.Z,{className:"width-50-991-100",type:"submit",variant:"".concat(e.submitBtnVariant?e.submitBtnVariant:"success"),children:e.submitBtnText})})]})}})},C=t(1398),I=t(8949),E=t(3504),b=t(847),y=t(8130),O=t(4889),q=t(3829),Z=t(4521),P=t(258),S=function(e){var n=(0,o.useContext)(y.Z),t=function(e){var n=0;return e.questions.forEach((function(e){return n+=+e.points})),n};return(0,f.jsx)(C.Z,{className:"maxwidth-720",children:(0,f.jsx)(I.Z,{children:e.tests.map((function(e){return(0,f.jsxs)(I.Z.Item,{eventKey:""+e.id,children:[(0,f.jsx)(I.Z.Header,{children:(0,f.jsx)("p",{className:"h4 m-0",children:e.title})}),(0,f.jsxs)(I.Z.Body,{children:[(0,f.jsx)(P.Z,{requiredRole:[b.i4.ADMIN,b.i4.TEACHER],children:(0,f.jsxs)("div",{className:" d-flex flex-column d-md-block float-md-end",children:[(0,f.jsx)(Z.Z,{btnTitle:"Upravi\u0165",modalTitle:"\xdaprava existuj\xfaceho testu",btnVariant:"warning",icon:(0,f.jsx)(O.Z,{}),className:"me-md-2",children:(0,f.jsx)(N,{onSubmit:n.modifyTest.bind(null,e.id),submitBtnText:"Potvrdi\u0165 zmeny",formField:e})}),(0,f.jsx)(q.Z,{confirmBtnTitle:"Vymaza\u0165",className:"mb-2 mt-2 mb-md-0 mt-md-0",title:"Vymazanie testu",headerTitle:"Naozaj chcete vymaza\u0165 tento test?",onConfirm:n.deleteTest.bind(null,e.id)})]})}),(0,f.jsxs)("p",{children:["N\xe1zov: ".concat(e.title),(0,f.jsx)("br",{}),"Po\u010det ot\xe1zok: ".concat(e.questions.length),(0,f.jsx)("br",{}),"Maxim\xe1lny po\u010det bodov: ".concat(t(e))]}),(0,f.jsx)("div",{className:"text-center",children:(0,f.jsx)(E.rU,{className:"width-responsive btn btn-primary",to:"/tests/".concat(e.id),children:"P\xedsa\u0165 test"})})]})]},e.id)}))})})},_=t(7222),g=t(5711),k=function(){var e,n=(0,o.useContext)(y.Z),t=n.data,i=t.error,d=t.opStatus,u=t.tests,m=n.fetchAll,h=(0,o.useState)(!1),p=(0,s.Z)(h,2),x=p[0],T=p[1];(0,o.useEffect)((function(){m()}),[m]);var v=(0,f.jsx)(P.Z,{requiredRole:[b.i4.ADMIN,b.i4.TEACHER],children:(0,f.jsxs)("div",{className:"centered",children:[(0,f.jsx)(r.Z,{onClick:function(){return T(!0)},children:"Vytvori\u0165 nov\xfd test"}),(0,f.jsx)(l.Z,{title:"Vytvorenie nov\xe9ho Testu",backdropType:"static",show:x,onHide:function(){return T(!1)},children:(0,f.jsx)(N,{onSubmit:function(e){n.saveTest(e),T(!1)},submitBtnText:"Vytvori\u0165 test"})})]})});return"Pending"===d&&(e=(0,f.jsx)("div",{className:"centered",children:(0,f.jsx)(g.Z,{})})),(i||"Failure"===d)&&(e=(0,f.jsx)("p",{className:"centered h4 error-msg",children:i})),"Finished"!==d||u&&0!==u.length||(e=(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"centered",children:(0,f.jsx)("p",{className:"h4",children:"\u017diadne testy neboli n\xe1jden\xe9"})})})),"Finished"===d&&!i&&u&&u.length>0&&(e=(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"maxwidth-720",children:(0,f.jsx)(S,{tests:u})})})),(0,f.jsxs)(_.Z,{children:[(0,f.jsx)(c.Z,{children:(0,f.jsxs)(a.Z,{children:[(0,f.jsx)("div",{className:"centered",children:(0,f.jsx)("h2",{className:"display-2 txt-main",children:"Zoznam Testov"})}),v]})}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(a.Z,{children:e})})]})}}}]);
//# sourceMappingURL=112.e81b7321.chunk.js.map