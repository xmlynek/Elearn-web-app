"use strict";(self.webpackChunkbp_frontend_typescript=self.webpackChunkbp_frontend_typescript||[]).push([[722],{2214:function(s,e,r){r.r(e),r.d(e,{default:function(){return N}});var n=r(5861),a=r(885),o=r(7757),i=r.n(o),t=r(2791),c=r(8758),d=r(4889),m=r(5711),l=r(4521),u=r(6864),p=r(3360),w=r(6006),h=r(184),v=function(s){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(u.J9,{initialValues:{currentPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:w.Ry({currentPassword:w.Z_().trim().required("*Povinn\xe9"),newPassword:w.Z_().trim().required("*Povinn\xe9").min(8,"Heslo mus\xed ma\u0165 aspo\u0148 8 znakov").max(255,"Maxim\xe1lny po\u010det znakov je 255").matches(/\d/,"Heslo mus\xed obsahova\u0165 aspo\u0148 jednu \u010d\xedslicu").matches(/[a-zA-Z]/,"Heslo mus\xed obsahova\u0165 aspo\u0148 jedno p\xedsmeno"),confirmNewPassword:w.Z_().trim().required("*Povinn\xe9").oneOf([w.iH("newPassword")],"Hesl\xe1 sa musia zhodova\u0165")}),onSubmit:function(e){s.onSubmit(e)},children:function(s){var e=s.errors,r=s.touched;return(0,h.jsxs)(u.l0,{className:"form-floating mb-3",children:[(0,h.jsx)("div",{className:"mt-3 mb-4",children:(0,h.jsxs)("div",{className:"form-control",children:[(0,h.jsx)("label",{htmlFor:"currentPassword",children:"S\xfa\u010dasn\xe9 heslo"}),(0,h.jsx)(u.gN,{type:"password",name:"currentPassword",className:"form-control ".concat(e.currentPassword&&r.currentPassword?"is-invalid":"")}),(0,h.jsx)(u.Bc,{name:"currentPassword",children:function(s){return(0,h.jsx)("div",{className:"error-msg",children:s})}})]})}),(0,h.jsx)("div",{className:"mt-3 mb-4",children:(0,h.jsxs)("div",{className:"form-control",children:[(0,h.jsx)("label",{htmlFor:"newPassword",children:"Nov\xe9 heslo"}),(0,h.jsx)(u.gN,{type:"password",name:"newPassword",className:"form-control ".concat(e.newPassword&&r.newPassword?"is-invalid":"")}),(0,h.jsx)(u.Bc,{name:"newPassword",children:function(s){return(0,h.jsx)("div",{className:"error-msg",children:s})}})]})}),(0,h.jsx)("div",{className:"mt-3 mb-4",children:(0,h.jsxs)("div",{className:"form-control",children:[(0,h.jsx)("label",{htmlFor:"confirmNewPassword",children:"Potvrdenie nov\xe9ho hesla"}),(0,h.jsx)(u.gN,{type:"password",name:"confirmNewPassword",className:"form-control ".concat(e.confirmNewPassword&&r.confirmNewPassword?"is-invalid":"")}),(0,h.jsx)(u.Bc,{name:"confirmNewPassword",children:function(s){return(0,h.jsx)("div",{className:"error-msg",children:s})}})]})}),(0,h.jsx)("div",{className:"text-center",children:(0,h.jsx)(p.Z,{type:"submit",className:"width-responsive",children:"Potvrdi\u0165 zmenu"})})]})}})})},f=r(8145),x=r(490),g=r(2247),j=r(335),N=function(s){var e=(0,t.useContext)(j.Z),r=(0,g.Z)("/users"),o=e.user,u=(0,t.useState)({msg:"",isLoading:!1}),p=(0,a.Z)(u,2),w=p[0],N=p[1],P=function(){var s=(0,n.Z)(i().mark((function s(n,a){var o;return i().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return N({msg:"",isLoading:!0}),s.prev=1,s.next=4,(0,c.r$)(r,n,a);case 4:o=s.sent,e.updateUserData(o),N({msg:"\xdadaje boli \xfaspe\u0161ne zmenen\xe9",type:"success",isLoading:!1}),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(1),s.t0.response.data.message?N({type:"err",msg:"Invalid password"===s.t0.response.data.message?"Nespr\xe1vne heslo":s.t0.response.data.message,isLoading:!1}):N({type:"err",msg:s.t0.message,isLoading:!1});case 12:case"end":return s.stop()}}),s,null,[[1,9]])})));return function(e,r){return s.apply(this,arguments)}}(),b=function(){var s=(0,n.Z)(i().mark((function s(e,n){return i().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return N({msg:"",isLoading:!0}),s.prev=1,s.next=4,(0,c.r$)(r,e,n);case 4:N({msg:"Heslo bolo \xfaspe\u0161ne zmenen\xe9",type:"success",isLoading:!1}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(1),s.t0.response.data.message?N({type:"err",msg:"Invalid password"===s.t0.response.data.message?"Nespr\xe1vne heslo":s.t0.response.data.message,isLoading:!1}):N({type:"err",msg:s.t0.message,isLoading:!1});case 10:case"end":return s.stop()}}),s,null,[[1,7]])})));return function(e,r){return s.apply(this,arguments)}}(),Z=function(){N({msg:"",isLoading:!1})};if(!o)return(0,h.jsx)("div",{className:"centered",children:"Pou\u017e\xedvate\u013e nebol n\xe1jden\xfd, sk\xfaste sa prihl\xe1si\u0165 znova"});var y=(0,h.jsxs)(h.Fragment,{children:[" ",w.isLoading&&(0,h.jsx)("div",{className:"centered",children:(0,h.jsx)(m.Z,{})}),"err"===w.type&&""!==w.msg&&(0,h.jsx)("div",{className:"centered error-msg",children:(0,h.jsx)("p",{className:"h4",children:w.msg})}),"success"===w.type&&""!==w.msg&&(0,h.jsx)("div",{className:"centered",children:(0,h.jsx)("p",{className:"h4",children:w.msg})})]});return(0,h.jsxs)(x.Z,{user:o,header:"V\xe1\u0161 profil",children:[(0,h.jsxs)(l.Z,{callbackFunc:Z,btnTitle:"Upravi\u0165 \xfadaje",modalTitle:"\xdaprava \xfadajov",btnVariant:"warning",icon:(0,h.jsx)(d.Z,{}),className:"me-md-2 width-50-991-100",children:[(0,h.jsx)(f.Z,{formData:o,onSubmitText:"Zmeni\u0165",onSubmit:function(s){P(o.id,{email:s.email,firstname:s.firstname,lastname:s.lastname,password:s.password})}}),y]}),(0,h.jsxs)(l.Z,{callbackFunc:Z,btnTitle:"Zmeni\u0165 heslo",modalTitle:"Zmena hesla",btnVariant:"warning",icon:(0,h.jsx)(d.Z,{}),className:"me-md-2 width-50-991-100 mt-2",children:[(0,h.jsx)(v,{onSubmit:function(s){b(o.id,{password:s.currentPassword,newPassword:s.newPassword,confirmNewPassword:s.confirmNewPassword})}}),y]})]})}}}]);
//# sourceMappingURL=722.d13ff936.chunk.js.map