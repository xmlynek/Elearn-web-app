"use strict";(self.webpackChunkbp_frontend_typescript=self.webpackChunkbp_frontend_typescript||[]).push([[722],{7719:function(s,e,r){var n=r(4889),a=r(1578),i=r(4521),o=r(184);e.Z=function(s){var e=(0,a.Z)();return(0,o.jsx)(i.Z,{btnTitle:s.btnTitle?s.btnTitle:null===e||void 0===e?void 0:e.updateLabel,modalTitle:s.modalTitle,btnVariant:"warning",icon:(0,o.jsx)(n.Z,{}),className:s.className?s.className:"me-md-2",children:s.children})}},2214:function(s,e,r){r.r(e),r.d(e,{default:function(){return j}});var n=r(5861),a=r(885),i=r(7757),o=r.n(i),d=r(2791),t=r(8758),l=r(5711),c=r(7719),m=r(6864),u=r(3360),v=r(6006),w=r(1578),h=r(184),p=function(s){var e=(0,w.Z)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(m.J9,{initialValues:{currentPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:v.Ry({currentPassword:v.Z_().trim().required(null===e||void 0===e?void 0:e.isRequiredErr),newPassword:v.Z_().trim().required(null===e||void 0===e?void 0:e.isRequiredErr).min(8,null===e||void 0===e?void 0:e.passwordLengthErr).max(255,null===e||void 0===e?void 0:e.maxCharLengthErr).matches(/\d/,null===e||void 0===e?void 0:e.passwordMustContainNumberErr).matches(/[a-zA-Z]/,null===e||void 0===e?void 0:e.passwordMustContainLetterErr),confirmNewPassword:v.Z_().trim().required(null===e||void 0===e?void 0:e.isRequiredErr).oneOf([v.iH("newPassword")],null===e||void 0===e?void 0:e.passwordMustMatchErr)}),onSubmit:function(e){s.onSubmit(e)},children:function(s){var r=s.errors,n=s.touched;return(0,h.jsxs)(m.l0,{className:"form-floating mb-3",children:[(0,h.jsx)("div",{className:"mt-3 mb-4",children:(0,h.jsxs)("div",{className:"form-control",children:[(0,h.jsx)("label",{htmlFor:"currentPassword",children:null===e||void 0===e?void 0:e.currentPasswordLabel}),(0,h.jsx)(m.gN,{type:"password",name:"currentPassword",className:"form-control ".concat(r.currentPassword&&n.currentPassword?"is-invalid":"")}),(0,h.jsx)(m.Bc,{name:"currentPassword",children:function(s){return(0,h.jsx)("div",{className:"error-msg",children:s})}})]})}),(0,h.jsx)("div",{className:"mt-3 mb-4",children:(0,h.jsxs)("div",{className:"form-control",children:[(0,h.jsx)("label",{htmlFor:"newPassword",children:null===e||void 0===e?void 0:e.newPasswordLabel}),(0,h.jsx)(m.gN,{type:"password",name:"newPassword",className:"form-control ".concat(r.newPassword&&n.newPassword?"is-invalid":"")}),(0,h.jsx)(m.Bc,{name:"newPassword",children:function(s){return(0,h.jsx)("div",{className:"error-msg",children:s})}})]})}),(0,h.jsx)("div",{className:"mt-3 mb-4",children:(0,h.jsxs)("div",{className:"form-control",children:[(0,h.jsx)("label",{htmlFor:"confirmNewPassword",children:null===e||void 0===e?void 0:e.confirmNewPasswordLabel}),(0,h.jsx)(m.gN,{type:"password",name:"confirmNewPassword",className:"form-control ".concat(r.confirmNewPassword&&n.confirmNewPassword?"is-invalid":"")}),(0,h.jsx)(m.Bc,{name:"confirmNewPassword",children:function(s){return(0,h.jsx)("div",{className:"error-msg",children:s})}})]})}),(0,h.jsx)("div",{className:"text-center",children:(0,h.jsx)(u.Z,{type:"submit",className:"width-responsive",children:null===e||void 0===e?void 0:e.changePasswordConfirmSubmitLabel})})]})}})})},f=r(8145),g=r(490),x=r(2247),N=r(2308),j=function(s){var e=(0,w.Z)(),r=(0,d.useContext)(N.Z),i=(0,x.Z)("/users"),m=r.user,u=(0,d.useState)({msg:"",isLoading:!1}),v=(0,a.Z)(u,2),j=v[0],P=v[1],b=function(){var s=(0,n.Z)(o().mark((function s(n,a){var d;return o().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return P({msg:"",isLoading:!0}),s.prev=1,s.next=4,(0,t.r$)(i,n,a);case 4:d=s.sent,r.updateUserData(d),P({msg:e.dataSuccessfullyChanged,type:"success",isLoading:!1}),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(1),s.t0.response.data.message?P({type:"err",msg:"Invalid password"===s.t0.response.data.message?null===e||void 0===e?void 0:e.invalidPassword:s.t0.response.data.message,isLoading:!1}):P({type:"err",msg:s.t0.message,isLoading:!1});case 12:case"end":return s.stop()}}),s,null,[[1,9]])})));return function(e,r){return s.apply(this,arguments)}}(),Z=function(){var s=(0,n.Z)(o().mark((function s(r,n){return o().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return P({msg:"",isLoading:!0}),s.prev=1,s.next=4,(0,t.r$)(i,r,n);case 4:P({msg:e.passwordSuccessfullyChanged,type:"success",isLoading:!1}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(1),s.t0.response.data.message?P({type:"err",msg:"Invalid password"===s.t0.response.data.message?null===e||void 0===e?void 0:e.invalidPassword:s.t0.response.data.message,isLoading:!1}):P({type:"err",msg:s.t0.message,isLoading:!1});case 10:case"end":return s.stop()}}),s,null,[[1,7]])})));return function(e,r){return s.apply(this,arguments)}}();if(!m)return(0,h.jsx)("div",{className:"centered",children:null===e||void 0===e?void 0:e.userNotFoundReauth});var y=(0,h.jsxs)(h.Fragment,{children:[" ",j.isLoading&&(0,h.jsx)("div",{className:"centered",children:(0,h.jsx)(l.Z,{})}),"err"===j.type&&""!==j.msg&&(0,h.jsx)("div",{className:"centered error-msg",children:(0,h.jsx)("p",{className:"h4",children:j.msg})}),"success"===j.type&&""!==j.msg&&(0,h.jsx)("div",{className:"centered",children:(0,h.jsx)("p",{className:"h4",children:j.msg})})]});return(0,h.jsxs)(g.Z,{user:m,header:null===e||void 0===e?void 0:e.yourProfileHeader,children:[(0,h.jsxs)(c.Z,{modalTitle:null===e||void 0===e?void 0:e.updateProfileModalTitle,className:"me-md-2 width-50-991-100",btnTitle:null===e||void 0===e?void 0:e.updateProfileModalButtonTitle,children:[(0,h.jsx)(f.Z,{formData:m,onSubmitText:null===e||void 0===e?void 0:e.updateSubmitButtonLabel,onSubmit:function(s){b(m.id,{email:s.email,firstname:s.firstname,lastname:s.lastname,password:s.password})}}),y]}),(0,h.jsxs)(c.Z,{modalTitle:null===e||void 0===e?void 0:e.changePasswordModalTitle,className:"me-md-2 width-50-991-100 mt-2",btnTitle:null===e||void 0===e?void 0:e.changePasswordModalButtonTitle,children:[(0,h.jsx)(p,{onSubmit:function(s){Z(m.id,{password:s.currentPassword,newPassword:s.newPassword,confirmNewPassword:s.confirmNewPassword})}}),y]})]})}}}]);
//# sourceMappingURL=722.dcd3919a.chunk.js.map