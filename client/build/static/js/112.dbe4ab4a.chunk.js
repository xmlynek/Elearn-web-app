"use strict";(self.webpackChunkbp_frontend_typescript=self.webpackChunkbp_frontend_typescript||[]).push([[112],{7122:function(e,n,t){var i=t(885),o=t(2791),s=t(3360),r=t(1578),l=t(7285),c=t(184);n.Z=function(e){var n=(0,o.useState)(!1),t=(0,i.Z)(n,2),a=t[0],d=t[1],u=(0,r.Z)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.Z,{show:a,bodyMessage:e.headerTitle?e.headerTitle:"Potvrdenie vymazania topiku",onHide:function(){d(!1)},title:e.title?e.title:"Naozaj chcete vymaza\u0165 tento topik?",onConfirm:e.onDelete}),(0,c.jsx)(s.Z,{variant:"danger",onClick:function(){d(!0)},className:e.className?e.className:"ms-2",children:null===u||void 0===u?void 0:u.deleteLabel})]})}},112:function(e,n,t){t.r(n),t.d(n,{default:function(){return L}});var i,o=t(885),s=t(2791),r=t(3360),l=t(9743),c=t(2677),a=t(5759),d=t(4942),u=t(1413),m=t(6006),h=t(6864),v=t(2451),T=t(2784),x=t(9186),p=t(473),f=t(184),N=function(e){return(0,f.jsxs)("div",{children:[(0,f.jsxs)("h5",{className:"card-title",children:[e.label,e.withCloseButton&&(0,f.jsx)(p.Z,{className:"float-end",onClick:e.withCloseButton.onDelete})]}),(0,f.jsx)(h.gN,{name:e.name,as:e.as?e.as:"",type:"".concat(e.type?e.type:"text"),step:"number"===e.type?.5:"",placeholder:e.placeholder,className:"form-control ".concat(e.error?"is-invalid":""," ").concat(e.className),onChange:function(n){e.onChange(n)},children:e.children}),(0,f.jsx)(h.Bc,{name:e.name,children:function(e){return(0,f.jsx)("div",{className:"error-msg mt-2",children:e})}})]})},j=t(1578);!function(e){e[e.QUESTION_TITLE=0]="QUESTION_TITLE",e[e.QUESTION_POINTS=1]="QUESTION_POINTS",e[e.QUESTION_TYPE=2]="QUESTION_TYPE",e[e.OPTION_TITLE=3]="OPTION_TITLE",e[e.OPTION_CORRECT=4]="OPTION_CORRECT",e[e.TEST_TITLE=5]="TEST_TITLE"}(i||(i={}));var C=function(e){var n=(0,j.Z)(),t=(0,s.useState)(e.formField?e.formField:new x.Z(1,"",-1,[new v.ZP(Math.random(),1,1,"",v.TC.INPUT,[new T.Z(Math.random(),"",!0),new T.Z(Math.random(),"",!0)])])),l=(0,o.Z)(t,2),c=l[0],a=l[1],p=function(e,n){a((function(n){var t=n;return t.questions=t.questions.filter((function(n){return n.id!==e})),t})),n(c)},C=function(e,n,t){a((function(t){var i=t,o=i.questions.findIndex((function(n){return n.id===e}));return i.questions[o].options=i.questions[o].options.filter((function(e){return e.id!==n})),i})),t(c)},E=function(e,n,t,o,s,r,l){a((function(t){var o=e.currentTarget.value,s=t;if(n===i.TEST_TITLE&&(s.title=o),r){var c=s.questions.at(s.questions.findIndex((function(e){return e.id===r})));if(!c)return t;if(l){var a=c.options.at(c.options.findIndex((function(e){return e.id===l})));if(!a)return t;n===i.OPTION_TITLE&&(a.title=o),n===i.OPTION_CORRECT&&(c.type===v.TC.SINGLE_CHOICE&&c.options.forEach((function(e){return e.isCorrect=e.id===a.id})),a.isCorrect=e.currentTarget.checked)}n===i.QUESTION_TITLE&&(c.title=o),n===i.QUESTION_POINTS&&(c.points=o),n===i.QUESTION_TYPE&&(c.type=o,c.options.forEach((function(e){return e.isCorrect=c.type===v.TC.INPUT})))}return s})),o(c),s(t)},b=m.Ry().shape({title:m.Z_().required(null===n||void 0===n?void 0:n.isRequiredErr),questions:m.IX().of(m.Ry().shape({points:m.Rx().min(1,null===n||void 0===n?void 0:n.minPointsCountErr),title:m.Z_().required(null===n||void 0===n?void 0:n.isRequiredErr),type:m.Z_().required(null===n||void 0===n?void 0:n.isRequiredErr),options:m.IX().of(m.Ry().shape({title:m.Z_().required(null===n||void 0===n?void 0:n.isRequiredErr),correct:m.O7()})).min(1,null===n||void 0===n?void 0:n.questionMustContainAnswerErr).required(null===n||void 0===n?void 0:n.isRequiredErr).max(6,null===n||void 0===n?void 0:n.maxAmountOfAnswersErr)})).min(1,null===n||void 0===n?void 0:n.testMustContainQuestionErr).required(null===n||void 0===n?void 0:n.isRequiredErr)});return(0,f.jsx)(h.J9,{initialValues:c,enableReinitialize:!0,validateOnBlur:!0,validate:function(e){var t={};try{b.validateSync(e,{abortEarly:!1})}catch(i){t=i.inner.reduce((function(e,n){return(0,u.Z)((0,u.Z)({},e),{},(0,d.Z)({},n.path,n.message))}))}finally{return e.questions.some((function(e){return e.options.every((function(e){return!1===e.isCorrect}))}))?(0,u.Z)((0,u.Z)({},t),{},{optNotSelected:null===n||void 0===n?void 0:n.oneAnswerMustBeCorrectErr}):t}},validationSchema:b,onSubmit:function(n){e.onSubmit(c)},children:function(t){var o=t.errors,s=t.values,l=t.touched,d=t.setValues,u=t.handleChange;t.setErrors;return(0,f.jsxs)(h.l0,{className:"form",children:[(0,f.jsxs)("div",{className:"list-group-item mt-3 ",children:[(0,f.jsx)(N,{label:null===n||void 0===n?void 0:n.testTitleHeader,name:"title",error:!(!o.title||!l.title),placeholder:null===n||void 0===n?void 0:n.testTitlePlaceholder,onChange:function(e){E(e,i.TEST_TITLE,"title",d,u)}}),"string"===typeof o.questions?(0,f.jsx)("div",{className:"centered error-msg",children:(0,f.jsx)("h4",{children:o.questions})}):null,(0,f.jsx)(h.F2,{name:"questions",children:function(e){return s.questions.map((function(e,t){var s=function(e){return(0,h.u9)(o,e)&&(0,h.u9)(l,e)};return(0,f.jsxs)("div",{children:[(0,f.jsx)("hr",{}),(0,f.jsxs)("div",{className:"list-group-item mt-3 ",children:[(0,f.jsx)(N,{label:"".concat(null===n||void 0===n?void 0:n.questionLabel," ").concat(t+1),name:"questions.".concat(t,".title"),withCloseButton:{onDelete:p.bind(null,e.id,d)},as:"textarea",error:s("questions.".concat(t,".title")),placeholder:null===n||void 0===n?void 0:n.questionPlaceholder,onChange:function(n){return E(n,i.QUESTION_TITLE,"questions.".concat(t,".title"),d,u,e.id)}},"Ot\xe1zka ".concat(t+1)),(0,f.jsxs)("div",{className:"row mt-3",children:[(0,f.jsx)("div",{className:"col-12 col-md-6",children:(0,f.jsx)("div",{className:"form-control",children:(0,f.jsx)(N,{label:null===n||void 0===n?void 0:n.numberOfPointsLabel,name:"questions.".concat(t,".points"),error:s("questions.".concat(t,".points")),className:"mb-2",type:"number",placeholder:"1",onChange:function(n){return E(n,i.QUESTION_POINTS,"questions.".concat(t,".points"),d,u,e.id)}})})}),(0,f.jsx)("div",{className:"col mt-sm-3 mt-md-0",children:(0,f.jsx)("div",{className:"form-control",children:(0,f.jsxs)(N,{name:"questions.".concat(t,".type"),label:null===n||void 0===n?void 0:n.questionTypeLabel,as:"select",className:"mb-2",error:s("questions.".concat(t,".type")),onChange:function(n){return E(n,i.QUESTION_TYPE,"questions.".concat(t,".type"),d,u,e.id)},children:[(0,f.jsx)("option",{value:v.TC.INPUT,children:null===n||void 0===n?void 0:n.questionTextInputType}),(0,f.jsx)("option",{value:v.TC.SINGLE_CHOICE,children:null===n||void 0===n?void 0:n.questionSingleOptionType}),(0,f.jsx)("option",{value:v.TC.MULTIPLE_CHOICES,children:null===n||void 0===n?void 0:n.questionMultipleOptionsType})]})})})]}),"string"===typeof(0,h.u9)(o,"questions.".concat(t,".options"))?(0,f.jsx)("div",{className:"centered error-msg",children:(0,f.jsx)("h4",{children:(0,h.u9)(o,"questions.".concat(t,".options"))})}):null,(0,f.jsx)(h.F2,{name:"questions.".concat(t,".options"),children:function(o){return e.options.map((function(o,r){return(0,f.jsx)("div",{className:"mt-3 mb-4",children:(0,f.jsx)("div",{className:"list-group-item",children:(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)(N,{name:"questions.".concat(t,".options.").concat(r,".title"),withCloseButton:{onDelete:C.bind(null,e.id,o.id,d)},label:"".concat(null===n||void 0===n?void 0:n.answerLabel," ").concat(r+1),onChange:function(n){E(n,i.OPTION_TITLE,"questions.".concat(t,".options.").concat(r,".title"),d,u,e.id,o.id)},error:s("questions.".concat(t,".options.").concat(r,".title"))}),(0,f.jsxs)("div",{className:"mt-2",children:[(0,f.jsx)("label",{htmlFor:"questions.".concat(t,".options.").concat(r),className:"me-3 form-label",children:null===n||void 0===n?void 0:n.correctAnswerCheckBoxLabel}),(0,f.jsx)("input",{name:"option".concat(t),id:"questions.".concat(t,".options.").concat(r),type:"".concat(e.type===v.TC.MULTIPLE_CHOICES||e.type===v.TC.INPUT?"checkbox":"radio"),checked:o.isCorrect,disabled:e.type===v.TC.INPUT,onClick:function(n){e.type===v.TC.SINGLE_CHOICE&&e.options.length>1&&e.options.every((function(e){return e.isCorrect}))&&E(n,i.OPTION_CORRECT,"questions.".concat(t,".options.").concat(r,".correct"),d,u,e.id,o.id)},onChange:function(n){E(n,i.OPTION_CORRECT,"questions.".concat(t,".options.").concat(r,".correct"),d,u,e.id,o.id)}})]})]})})},o.id)}))}}),e.options.length>0&&e.options.every((function(e){return!1===e.isCorrect}))&&(0,h.u9)(o,"optNotSelected")&&(0,f.jsx)("div",{className:"centered error-msg",children:(0,f.jsx)("h5",{children:(0,h.u9)(o,"optNotSelected")})}),(0,f.jsx)("div",{className:"centered my-1 mb-3",children:(0,f.jsx)(r.Z,{className:"width-25-991-60",variant:"secondary",onClick:function(){var n;n=e.id,a((function(e){var t=e,i=t.questions.findIndex((function(e){return e.id===n}));return t.questions[i].options.push(new T.Z(Math.random(),"",t.questions[i].type===v.TC.INPUT)),t})),d(c)},children:null===n||void 0===n?void 0:n.addAnswerLabel})})]})]},t)}))}}),(0,f.jsx)("div",{className:"centered mt-4 mb-3",children:(0,f.jsx)(r.Z,{className:"width-35-991-80",onClick:function(){a((function(e){var n=e;return n.questions.push(new v.ZP(Math.random(),n.questions.length+1,1,"",v.TC.INPUT,[new T.Z(Math.random(),"",!0)])),n})),d(c)},children:null===n||void 0===n?void 0:n.addQuestionLabel})})]}),(0,f.jsx)("div",{className:"text-center mt-4 mb-2",children:(0,f.jsx)(r.Z,{className:"width-50-991-100",type:"submit",variant:"".concat(e.submitBtnVariant?e.submitBtnVariant:"success"),children:e.submitBtnText})})]})}})},E=t(1398),b=t(8949),I=t(3504),q=t(847),O=t(8130),Z=t(258),y=t(7719),S=t(7122),_=function(e){var n=(0,s.useContext)(O.Z),t=(0,j.Z)(),i=function(e){var n=0;return e.questions.forEach((function(e){return n+=+e.points})),n};return(0,f.jsx)(E.Z,{className:"maxwidth-720",children:(0,f.jsx)(b.Z,{children:e.tests.map((function(e){return(0,f.jsxs)(b.Z.Item,{eventKey:""+e.id,children:[(0,f.jsx)(b.Z.Header,{children:(0,f.jsx)("p",{className:"h4 m-0",children:e.title})}),(0,f.jsxs)(b.Z.Body,{children:[(0,f.jsx)(Z.Z,{requiredRole:[q.i4.ADMIN,q.i4.TEACHER],children:(0,f.jsxs)("div",{className:" d-flex flex-column d-md-block float-md-end",children:[(0,f.jsx)(y.Z,{modalTitle:null===t||void 0===t?void 0:t.testUpdateModalTitle,children:(0,f.jsx)(C,{onSubmit:n.modifyTest.bind(null,e.id),submitBtnText:null===t||void 0===t?void 0:t.updateSubmitButtonLabel,formField:e})}),(0,f.jsx)(S.Z,{className:"mb-2 mt-2 mb-md-0 mt-md-0",title:null===t||void 0===t?void 0:t.deleteTestModalTitle,headerTitle:null===t||void 0===t?void 0:t.deleteTestModalLabel,onDelete:n.deleteTest.bind(null,e.id)})]})}),(0,f.jsxs)("p",{children:["".concat(null===t||void 0===t?void 0:t.titleLabel,": ").concat(e.title),(0,f.jsx)("br",{}),"".concat(null===t||void 0===t?void 0:t.numberOfQuestionsLabel,": ").concat(e.questions.length),(0,f.jsx)("br",{}),"".concat(null===t||void 0===t?void 0:t.maxAmountOfPointsLabel,": ").concat(i(e))]}),(0,f.jsx)("div",{className:"text-center",children:(0,f.jsx)(I.rU,{className:"width-responsive btn btn-primary",to:"/tests/".concat(e.id),children:null===t||void 0===t?void 0:t.takeTestLabel})})]})]},e.id)}))})})},g=t(7222),P=t(5711),L=function(){var e,n=(0,s.useContext)(O.Z),t=(0,j.Z)(),i=n.data,d=i.error,u=i.opStatus,m=i.tests,h=n.fetchAll,v=(0,s.useState)(!1),T=(0,o.Z)(v,2),x=T[0],p=T[1];(0,s.useEffect)((function(){h()}),[h]);var N=(0,f.jsx)(Z.Z,{requiredRole:[q.i4.ADMIN,q.i4.TEACHER],children:(0,f.jsxs)("div",{className:"centered",children:[(0,f.jsx)(r.Z,{onClick:function(){return p(!0)},children:null===t||void 0===t?void 0:t.createNewTestTitle}),(0,f.jsx)(a.Z,{title:null===t||void 0===t?void 0:t.createNewTestTitle,backdropType:"static",show:x,onHide:function(){return p(!1)},children:(0,f.jsx)(C,{onSubmit:function(e){n.saveTest(e),p(!1)},submitBtnText:null===t||void 0===t?void 0:t.createTestSubmitButtonTitle})})]})});return"Pending"===u&&(e=(0,f.jsx)("div",{className:"centered",children:(0,f.jsx)(P.Z,{})})),(d||"Failure"===u)&&(e=(0,f.jsx)("p",{className:"centered h4 error-msg",children:d})),"Finished"!==u||m&&0!==m.length||(e=(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"centered",children:(0,f.jsx)("p",{className:"h4",children:null===t||void 0===t?void 0:t.noTestsFound})})})),"Finished"===u&&!d&&m&&m.length>0&&(e=(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"maxwidth-720",children:(0,f.jsx)(_,{tests:m})})})),(0,f.jsxs)(g.Z,{children:[(0,f.jsx)(l.Z,{children:(0,f.jsxs)(c.Z,{children:[(0,f.jsx)("div",{className:"centered",children:(0,f.jsx)("h2",{className:"display-2 txt-main",children:null===t||void 0===t?void 0:t.testListHeader})}),N]})}),(0,f.jsx)(l.Z,{children:(0,f.jsx)(c.Z,{children:e})})]})}}}]);
//# sourceMappingURL=112.dbe4ab4a.chunk.js.map